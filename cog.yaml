# cog.yaml
# ✅ Stabil ve güvenli yapılandırma (CUDA 12.1, Python 3.10, GPU uyumlu)

build:
  gpu: true
  cuda: "12.1"
  python_version: "3.10"

  system_packages:
    - ffmpeg
    - git

  # Python bağımlılıkları — sırayla kurulacak şekilde düzenlendi
  python_packages:
    # PyTorch (önce temel torch paketleri kurulmalı)
    - torch==2.4.1
    - torchvision==0.19.1
    - torchaudio==2.4.1

    # Performans ve hız kütüphaneleri
    - xformers==0.0.28.post1
    - flash-attn==2.7.4.post1

    # Genel bağımlılıklar
    - librosa
    - misaki[en]
    - ninja
    - psutil
    - packaging
    - wheel
    - ffmpeg-python
    - "huggingface_hub>=0.23.0"
    - opencv-python
    - scipy
    - numpy
    - soundfile

  # Build aşamasında kontrol amaçlı komut
  run:
    - python -c "print('✅ Build OK - Environment ready')"

# Model giriş noktası
predict: "predict.py:Predictor"
